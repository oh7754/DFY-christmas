<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>크리스마스 트리 갤러리</title>
  <link rel="stylesheet" href="style/style.css" />
</head>
<body>
  <!-- 상단 프로필 + 햄버거 버튼 -->
  <div id="topBar" class="top-bar">
    <button id="profileButton" class="profile-circle" aria-label="프로필">
      <span id="profileInitial">?</span>
      <img id="profileImage" class="profile-image hidden" alt="프로필 이미지" />
    </button>
    <button id="menuToggle" class="menu-circle" aria-label="메뉴 열기">
      <span></span><span></span><span></span>
    </button>
  </div>

  <!-- 햄버거 눌렀을 때 나오는 패널 -->
  <div id="sidePanel" class="side-panel">
    <div class="side-inner">
      <!-- 로그인 / 계정 정보 -->
      <div class="account-pill">
        <div class="account-avatar">
          <span id="accountInitial">?</span>
          <img id="accountImage" class="profile-image hidden" alt="프로필 이미지" />
        </div>
        <div class="account-info">
          <div id="accountEmail" class="account-email">로그인 필요</div>
          <div id="accountSub" class="account-sub">사내 구글 계정만 사용 가능</div>
          <div class="account-actions">
            <button id="loginBtn" class="link-button">로그인</button>
            <button id="logoutBtn" class="link-button hidden">로그아웃</button>
          </div>
        </div>
        <button id="panelCloseBtn" class="pill-close" aria-label="메뉴 닫기">✕</button>
      </div>

      <!-- 내 소원 리스트 + 소원 추가 버튼 -->
      <div class="panel-section">
        <div class="panel-section-header">
          <span class="panel-title">내가 올린 소원</span>
          <button id="openWishModal" class="btn primary small">
            + 소원 추가
          </button>
        </div>
        <div id="myWishList" class="wish-list">
          <!-- JS에서 채움 -->
        </div>
      </div>
    </div>
  </div>

  <!-- 트리 이미지 클릭 시 띄우는 편지 패널 -->
  <div id="wishPanel" class="wish-panel hidden">
    <div class="wish-panel-inner">
      <div class="wish-panel-header">
        <div>
          <div class="wish-panel-label">From</div>
          <div id="wishSender" class="wish-panel-sender"></div>
        </div>
        <button id="wishCloseBtn" class="pill-close" aria-label="편지 닫기">✕</button>
      </div>
      <div class="wish-panel-body">
        <p id="wishContent"></p>
      </div>
    </div>
  </div>

  <!-- 소원 추가 모달 -->
  <div id="wishModal" class="modal hidden">
    <div class="modal-backdrop"></div>
    <div class="modal-content">
      <h2 class="modal-title">소원 추가</h2>

      <div class="form-group">
        <label for="wishFileInput">이미지 선택</label>
        <input id="wishFileInput" type="file" accept="image/*" />
        <div class="form-help">
          큰 이미지는 자동으로 리사이즈되어 업로드돼요.
        </div>
      </div>

      <div class="form-group">
        <label for="wishNameInput">소원을 빌 사람 이름 (선택)</label>
        <input id="wishNameInput" type="text" placeholder="예: 진환, 우리 팀 모두…" />
      </div>

      <div class="form-group">
        <label for="wishTextInput">소원 내용</label>
        <textarea id="wishTextInput" rows="4"
                  placeholder="올해 이루고 싶은 소원을 적어보세요."></textarea>
      </div>

      <div class="modal-actions">
        <button id="wishCancelBtn" class="btn secondary">취소</button>
        <button id="wishSubmitBtn" class="btn primary">올리기</button>
      </div>
    </div>
  </div>

  <!-- three.js (r150.1, 예전 방식 지원) -->
  <script src="https://cdn.jsdelivr.net/npm/three@0.150.1/build/three.min.js"></script>
  <!-- 앱 코드 -->
  <script type="module" src="main.js"></script>
</body>
</html>
